<!-- FRAGMENT: Ganado - Vista Comprador con PASO 2 (Negociación Final) y Transporte -->
<div xmlns:th="http://www.thymeleaf.org" class="space-y-6">
    <div th:fragment="detalle">

        <!-- PASO 2: CONFIRMACIÓN DE NEGOCIACIÓN FINAL   -->
        <div th:if="${!venta.pendienteConfirmacion}">
            <div class="bg-white rounded-2xl shadow-lg p-8">

                <!-- ENCABEZADO -->
                <div class="flex items-center gap-3 mb-4">
                    <div class="loading-spinner"></div>
                    <h3 class="text-2xl font-bold text-gray-900">
                        Paso 2: El vendedor está definiendo los términos finales
                    </h3>
                </div>

                <p class="text-gray-700 mb-6 leading-relaxed">
                    El vendedor está registrando los <span class="font-semibold">términos finales de la negociación</span>
                    acordados en la cita. En cuanto termine, podrás revisarlos y confirmar tu decisión.
                </p>

                <!-- BARRA DE PROGRESO -->
                <div class="progress-bar mb-8"></div>

                <!-- QUE ESTÁ HACIENDO EL VENDEDOR -->
                <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-6 mb-6">
                    <div class="flex items-start gap-4">
                        <div class="w-10 h-10 bg-blue-200 rounded-lg flex items-center justify-center flex-shrink-0">
                            <i class='bx bx-edit text-blue-700 text-xl'></i>
                        </div>
                        <div>
                            <p class="font-semibold text-blue-900">¿Qué está haciendo el vendedor?</p>
                            <p class="text-sm text-blue-800 mt-1">
                                Está ingresando los precios, cantidades y condiciones finales que acordaron durante la cita.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- MENSAJE DE ESPERA -->
                <div class="bg-yellow-50 border-2 border-yellow-300 rounded-xl p-6 mb-6">
                    <div class="flex items-start gap-4">
                        <div class="w-10 h-10 bg-yellow-200 rounded-lg flex items-center justify-center flex-shrink-0">
                            <i class='bx bx-time-five text-yellow-600 text-xl'></i>
                        </div>
                        <div>
                            <p class="font-semibold text-yellow-900">Debes esperar un momento</p>
                            <p class="text-sm text-yellow-800 mt-1">
                                Este proceso puede tomar unos minutos. La página se actualizará automáticamente
                                cuando el vendedor termine.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- INFORMACIÓN IMPORTANTE -->
                <div class="bg-green-50 border-2 border-green-300 rounded-xl p-6">
                    <div class="flex items-start gap-4">
                        <div class="w-10 h-10 bg-green-200 rounded-lg flex items-center justify-center flex-shrink-0">
                            <i class='bx bx-info-circle text-green-600 text-xl'></i>
                        </div>
                        <div>
                            <p class="font-semibold text-green-900">Información importante</p>
                            <p class="text-sm text-green-800 mt-1 leading-relaxed">
                                Si el proceso avanza directamente al <strong>Paso 3</strong> sin requerir tu confirmación,
                                significa que el vendedor <strong>mantendrá los mismos términos de la publicación original</strong>.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div th:if="${tipoProducto == 'GANADO' && venta.pasoActual == 2 && venta.pendienteConfirmacion}" class="bg-white rounded-2xl shadow-lg p-8">
            <h3 class="text-2xl font-bold text-gray-900 mb-2 flex items-center gap-2">
                <i class='bx bx-handshake text-emerald-600'></i>
                Paso 2: Confirmación de Negociación Final
            </h3>
            <p class="text-gray-600 mb-6">El vendedor ha establecido los términos finales de la negociación</p>

            <div th:if="${venta.pendienteConfirmacion == true}" class="bg-orange-50 border-2 border-orange-300 rounded-xl p-6 mb-6">
                <div class="flex items-start gap-4">
                    <div class="w-12 h-12 bg-orange-200 rounded-lg flex items-center justify-center flex-shrink-0">
                        <i class='bx bx-info-circle text-2xl text-orange-600'></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-bold text-orange-900 text-lg">Cambios en la Oferta</p>
                        <p class="text-sm text-orange-800 mt-2">El vendedor ha realizado cambios en los términos de la negociación después de la cita. Revisa los cambios detallados abajo.</p>
                    </div>
                </div>
            </div>

            <!-- Comparativa de cambios si existen -->
            <div th:if="${venta.pendienteConfirmacion == true}" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">

                <!-- Precio -->
                <div class="border-2 border-gray-200 rounded-xl p-4">
                    <p class="text-sm font-bold text-gray-900 mb-3 flex items-center gap-2">
                        <i class='bx bx-dollar-circle text-orange-600'></i>
                        Precio Total
                    </p>
                    <div class="space-y-2">
                        <div>
                            <p class="text-xs text-gray-600">Oferta Original:</p>
                            <p class="text-lg font-bold text-gray-900 line-through text-gray-400" th:text="${'$' + #numbers.formatInteger(venta.producto.precioProducto, 1, 'DEFAULT')}">$500,000</p>
                        </div>
                        <div class="h-1 bg-gradient-to-r from-transparent via-orange-300 to-transparent"></div>
                        <div>
                            <p class="text-xs text-gray-600">Nueva Oferta:</p>
                            <p class="text-lg font-bold text-orange-600" th:text="${'$' + #numbers.formatInteger(ventaDetalle.precioNegociado, 1, 'DEFAULT')}">$480,000</p>
                        </div>
                    </div>
                </div>

                <!-- Cantidad -->
                <div class="border-2 border-gray-200 rounded-xl p-4">
                    <p class="text-sm font-bold text-gray-900 mb-3 flex items-center gap-2">
                        <i class='bx bx-shopping-bag text-orange-600'></i>
                        Cantidad de Animales
                    </p>
                    <div class="space-y-2">
                        <div>
                            <p class="text-xs text-gray-600">Oferta Original:</p>
                            <p class="text-lg font-bold text-gray-900 line-through text-gray-400" th:text="${venta.producto.cantidad + ' animales'}">10 animales</p>
                        </div>
                        <div class="h-1 bg-gradient-to-r from-transparent via-orange-300 to-transparent"></div>
                        <div>
                            <p class="text-xs text-gray-600">Nueva Oferta:</p>
                            <p class="text-lg font-bold text-orange-600" th:text="${ventaDetalle.cantidadNegociada + ' animales'}">9 animales</p>
                        </div>
                    </div>
                </div>

                <!-- Condiciones Especiales -->
                <div th:if="${ventaDetalle.observacionesSanitarias != null and !#strings.isEmpty(ventaDetalle.observacionesSanitarias)}" class="border-2 border-gray-200 rounded-xl p-4 md:col-span-2">
                    <p class="text-sm font-bold text-gray-900 mb-3 flex items-center gap-2">
                        <i class='bx bx-list-check text-orange-600'></i>
                        Observaciones Sanitarias
                    </p>
                    <div class="space-y-2 text-sm">
                        <div th:if="${ventaDetalle.observacionesSanitarias != null and !#strings.isEmpty(ventaDetalle.observacionesSanitarias)}">
                            <p class="text-orange-600 font-semibold" th:text="${ventaDetalle.observacionesSanitarias}">Entrega a 5 días</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resumen de totales -->
            <div class="bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6">
                <p class="font-bold text-blue-900 mb-4 flex items-center gap-2">
                    <i class='bx bx-calculator'></i>
                    Resumen de la Negociación
                </p>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm">
                    <div class="bg-white p-3 rounded border border-blue-200">
                        <p class="text-xs text-gray-600 font-semibold">Cantidad</p>
                        <p class="text-lg font-bold text-gray-900" th:text="${ventaDetalle.cantidadNegociada}"></p>
                    </div>

                    <div class="bg-white p-3 rounded border border-blue-200">
                        <p class="text-xs text-gray-600 font-semibold">Total</p>
                        <p class="text-lg font-bold text-emerald-600" th:text="${'$' + #numbers.formatInteger(ventaDetalle.precioNegociado, 1, 'DEFAULT')}">$4,320,000</p>
                    </div>
                </div>
            </div>

            <!-- Formulario de respuesta -->
            <form th:action="@{/comprador/compras/confirmar-negociacion}" method="post" class="space-y-6">
                <input type="hidden" name="idVenta" th:value="${venta.idVenta}">
                <input type="hidden" name="cantidad" th:value="${ventaDetalle.cantidadNegociada}">
                <input type="hidden" name="precio" th:value="${ventaDetalle.precioNegociado}">

                <div class="bg-white border-2 rounded-xl p-6">
                    <p class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                        <i class='bx bx-help-circle'></i>
                        ¿Estás de acuerdo con estos términos?
                    </p>

                    <div class="space-y-3 mb-6">
                        <label class="flex items-center gap-3 cursor-pointer p-3 border-2 border-gray-200 rounded-lg hover:border-emerald-400 hover:bg-emerald-50 transition">
                            <input type="radio" name="respuesta" value="ACEPTA" required class="w-5 h-5 accent-emerald-600">
                            <span class="flex-1">
                                <span class="font-semibold text-gray-900">Sí, acepto estos términos</span>
                                <p class="text-xs text-gray-600 mt-0.5">Proceder con la compra en estas condiciones</p>
                            </span>
                        </label>

                        <label class="flex items-center gap-3 cursor-pointer p-3 border-2 border-gray-200 rounded-lg hover:border-orange-400 hover:bg-orange-50 transition">
                            <input type="radio" name="respuesta" value="RECHAZA" required class="w-5 h-5 accent-orange-600">
                            <span class="flex-1">
                                <span class="font-semibold text-gray-900">No estoy de acuerdo</span>
                                <p class="text-xs text-gray-600 mt-0.5">Enviar razón del rechazo al vendedor</p>
                            </span>
                        </label>
                    </div>

                    <!-- Campo para razón si rechaza (mostrado dinámicamente con JS) -->
                    <div id="razonRechazoContainer" class="hidden mt-4 p-4 bg-orange-50 border-2 border-orange-300 rounded-lg">
                        <label class="block text-sm font-bold text-gray-900 mb-2 flex items-center gap-2">
                            <i class='bx bx-message-square-detail'></i>
                            Razón del Rechazo *
                        </label>
                        <textarea name="razonRechazo" rows="4" placeholder="Explica por qué no aceptas estos términos. Sé específico para facilitar la negociación..." class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-600 focus:ring-2 focus:ring-orange-200 transition" id="razonRechazoInput"></textarea>
                        <p class="text-xs text-orange-700 mt-2">Mínimo 10 caracteres</p>
                    </div>
                </div>

                <!-- Aviso legal -->
                <div class="bg-blue-50 border-l-4 border-blue-600 p-6 rounded-lg">
                    <p class="font-bold text-blue-900 mb-2 flex items-center gap-2">
                        <i class='bx bx-shield-alt'></i>
                        Importante
                    </p>
                    <ul class="text-sm text-blue-800 space-y-1">
                        <li class="flex items-start gap-2"><i class='bx bx-check text-blue-600 flex-shrink-0 mt-0.5'></i> <span>Al aceptar, confirmas que estás de acuerdo con todos los términos de la negociación</span></li>
                        <li class="flex items-start gap-2"><i class='bx bx-check text-blue-600 flex-shrink-0 mt-0.5'></i> <span>Si rechazas, la negociación volverá a fase de revisión por el vendedor</span></li>
                    </ul>
                </div>

                <div class="flex gap-4">
                    <button type="button" onclick="history.back()" class="px-6 py-3 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300 transition flex items-center justify-center gap-2">
                        <i class='bx bx-arrow-back'></i> Atrás
                    </button>
                    <button type="submit" class="px-6 py-3 bg-gradient-to-r from-emerald-600 to-emerald-500 text-white rounded-lg font-semibold hover:shadow-lg transition flex-1 flex items-center justify-center gap-2">
                        <i class='bx bx-check-circle'></i> Confirmar Decisión
                    </button>
                </div>
            </form>

            <script>
                // Mostrar/ocultar razón de rechazo dinámicamente
                document.querySelectorAll('input[name="respuesta"]').forEach(radio => {
                    radio.addEventListener('change', function() {
                        const container = document.getElementById('razonRechazoContainer');
                        const input = document.getElementById('razonRechazoInput');
                        if (this.value === 'RECHAZA') {
                            container.classList.remove('hidden');
                            input.required = true;
                        } else {
                            container.classList.add('hidden');
                            input.required = false;
                            input.value = '';
                        }
                    });
                });
            </script>
        </div>

        <!-- ============================================ -->
        <!-- DOCUMENTACIÓN SANITARIA DE GANADO           -->
        <!-- ============================================ -->
        <div th:if="${tipoProducto == 'GANADO' && venta.pasoActual >= 3}" class="bg-white rounded-2xl shadow-lg p-8">
            <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
                <i class='bx bx-shield-check text-emerald-600'></i>
                Documentación Sanitaria del Ganado
            </h3>

            <div class="bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6">
                <p class="font-bold text-blue-900 mb-3 flex items-center gap-2">
                    <i class='bx bx-check-shield'></i>
                    Garantía de Calidad Sanitaria
                </p>
                <p class="text-sm text-blue-800">Todos estos documentos han sido verificados y cumplen con los requisitos legales del ICA (Instituto Colombiano Agropecuario). Tu ganado está garantizado sanitariamente.</p>
            </div>

            <div class="space-y-4">
                <!-- GSMI -->
                <div class="bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-emerald-400 transition">
                    <div class="flex items-start justify-between">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                <i class='bx bx-file text-2xl text-emerald-600'></i>
                            </div>
                            <div>
                                <p class="font-bold text-gray-900 text-lg">GSMI Vigente</p>
                                <p class="text-sm text-gray-600">Guía Sanitaria de Movilización Interna (ICA)</p>
                                <p class="text-xs text-gray-500 mt-2">Documento obligatorio que certifica el estado sanitario del ganado para transporte</p>
                            </div>
                        </div>
                        <span th:if="${ventaDetalle.archivoGSMI}" class="inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-bold whitespace-nowrap flex-shrink-0">
                            <i class='bx bx-check-circle'></i> Verificado
                        </span>
                        <span th:unless="${ventaDetalle.archivoGSMI}" class="text-xs text-orange-600 font-bold bg-orange-100 px-3 py-1 rounded-full whitespace-nowrap flex-shrink-0">Pendiente</span>
                    </div>
                </div>

                <!-- Certificados Sanitarios -->
                <div class="bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-emerald-400 transition">
                    <div class="flex items-start justify-between">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                <i class='bx bx-virus text-2xl text-emerald-600'></i>
                            </div>
                            <div>
                                <p class="font-bold text-gray-900 text-lg">Certificados de Salud</p>
                                <p class="text-sm text-gray-600">Libreta de salud, revisiones, vacunas, controles</p>
                                <p class="text-xs text-gray-500 mt-2">Incluye: Fiebre Aftosa, Tuberculosis, Brucelosis verificados</p>
                            </div>
                        </div>
                        <span th:if="${ventaDetalle.archivoCertificadoSanitario}" class="inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-bold whitespace-nowrap flex-shrink-0">
                            <i class='bx bx-check-circle'></i> Verificado
                        </span>
                        <span th:unless="${ventaDetalle.archivoCertificadoSanitario}" class="text-xs text-orange-600 font-bold bg-orange-100 px-3 py-1 rounded-full whitespace-nowrap flex-shrink-0">Pendiente</span>
                    </div>
                </div>

                <!-- Pruebas Serológicas -->
                <div class="bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-emerald-400 transition">
                    <div class="flex items-start justify-between">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                <i class='bx bx-test-tube text-2xl text-emerald-600'></i>
                            </div>
                            <div>
                                <p class="font-bold text-gray-900 text-lg">Pruebas Serológicas</p>
                                <p class="text-sm text-gray-600">Resultados negativos de laboratorio</p>
                                <p class="text-xs text-gray-500 mt-2">Brucelosis y Tuberculosis certificadas por laboratorio acreditado</p>
                            </div>
                        </div>
                        <span th:if="${ventaDetalle.archivoPruebas}" class="inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-bold whitespace-nowrap flex-shrink-0">
                            <i class='bx bx-check-circle'></i> Verificado
                        </span>
                        <span th:unless="${ventaDetalle.archivoPruebas}" class="text-xs text-orange-600 font-bold bg-orange-100 px-3 py-1 rounded-full whitespace-nowrap flex-shrink-0">Pendiente</span>
                    </div>
                </div>

                <!-- Inventario de Animales -->
                <div class="bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-emerald-400 transition">
                    <div class="flex items-start justify-between">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                <i class='bx bx-list-ul text-2xl text-emerald-600'></i>
                            </div>
                            <div>
                                <p class="font-bold text-gray-900 text-lg">Inventario Detallado de Animales</p>
                                <p class="text-sm text-gray-600">Identificación individual de cada animal</p>
                                <p class="text-xs text-gray-500 mt-2">DIN (chapetas), marcas, edad, peso, características físicas</p>
                            </div>
                        </div>
                        <span th:if="${ventaDetalle.archivoInventario}" class="inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-bold whitespace-nowrap flex-shrink-0">
                            <i class='bx bx-check-circle'></i> Verificado
                        </span>
                        <span th:unless="${ventaDetalle.archivoInventario}" class="text-xs text-orange-600 font-bold bg-orange-100 px-3 py-1 rounded-full whitespace-nowrap flex-shrink-0">Pendiente</span>
                    </div>
                </div>
            </div>

            <div class="bg-green-50 border-l-4 border-green-600 p-6 rounded-lg mt-6">
                <p class="font-bold text-green-900 mb-2 flex items-center gap-2">
                    <i class='bx bx-shield-alt text-2xl'></i>
                    Estado de Garantía Sanitaria
                </p>
                <div class="grid grid-cols-4 gap-3 mt-4">
                    <div class="bg-white rounded-lg p-3 text-center border border-green-200">
                        <p class="text-2xl font-bold text-green-600">
                            <span th:if="${ventaDetalle.archivoGSMI != null && ventaDetalle.archivoCertificadoSanitario != null && ventaDetalle.archivoPruebas != null && ventaDetalle.archivoInventario != null}">✓</span>
                            <span th:unless="${ventaDetalle.archivoGSMI != null && ventaDetalle.archivoCertificadoSanitario != null && ventaDetalle.archivoPruebas != null && ventaDetalle.archivoInventario != null}">✗</span>
                        </p>
                        <p class="text-xs text-gray-600 mt-1">Completo</p>
                    </div>
                    <div class="bg-white rounded-lg p-3 text-center border border-green-200">
                        <p class="text-sm font-bold text-gray-900">ICA</p>
                        <p class="text-xs text-gray-600 mt-1">Verificado</p>
                    </div>
                    <div class="bg-white rounded-lg p-3 text-center border border-green-200">
                        <p class="text-sm font-bold text-gray-900">Seguro</p>
                        <p class="text-xs text-gray-600 mt-1">Incluido</p>
                    </div>
                    <div class="bg-white rounded-lg p-3 text-center border border-green-200">
                        <p class="text-sm font-bold text-gray-900">Trazable</p>
                        <p class="text-xs text-gray-600 mt-1">100%</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- PASO 5: TRANSPORTE - TRAZABILIDAD COMPLETA  -->
        <!-- ============================================ -->
        <div th:if="${tipoProducto == 'GANADO' && venta.pasoActual >= 5}" class="bg-white rounded-2xl shadow-lg p-8">
            <h3 class="text-2xl font-bold text-gray-900 mb-2 flex items-center gap-2">
                <i class='bx bx-truck text-emerald-600'></i>
                Paso 5: Movilización y Transporte
            </h3>
            <p class="text-gray-600 mb-6">Trazabilidad completa del transporte del ganado según Resolución 6915/2022</p>

            <!-- Estado actual del transporte -->
            <div class="bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6">
                <p class="font-bold text-blue-900 mb-4 flex items-center gap-2">
                    <i class='bx bx-info-circle'></i>
                    Detalles de Movilización
                </p>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm text-blue-800">
                    <div class="bg-white p-3 rounded border border-blue-200">
                        <p class="font-bold mb-1">Fecha</p>
                        <p th:text="${#temporals.format(ventaDetalle.fechaTransporte, 'dd/MMM/yyyy')}">28/Ene/2025</p>
                    </div>
                    <div class="bg-white p-3 rounded border border-blue-200">
                        <p class="font-bold mb-1">Hora Estimada</p>
                        <p th:text="${ventaDetalle.horaTransporte ?: '10:00 AM'}">10:00 AM</p>
                    </div>
                    <div class="bg-white p-3 rounded border border-blue-200">
                        <p class="font-bold mb-1">Responsable</p>
                        <p>Vendedor</p>
                    </div>
                    <div class="col-span-2 md:col-span-3 bg-white p-3 rounded border border-blue-200">
                        <p class="font-bold mb-1">Punto de Entrega</p>
                        <p th:text="${ventaDetalle.puntoEntrega ?: 'Por confirmar'}">Dirección</p>
                    </div>
                </div>
            </div>

            <!-- Información del Transporte Responsabilidad Vendedor -->
            <div class="mb-6">
                <p class="font-bold text-gray-900 text-lg mb-4">Detalles de Transporte a Cargo del Vendedor</p>

                <div class="bg-white border-2 border-emerald-300 rounded-xl p-6">
                    <div class="space-y-4">

                        <!-- Datos del Vehículo -->
                        <div class="pb-4 border-b border-gray-200">
                            <p class="font-bold text-gray-900 mb-3 flex items-center gap-2">
                                <i class='bx bx-car text-emerald-600'></i>
                                Información del Vehículo
                            </p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                                <div>
                                    <p class="text-gray-600">Placa del Vehículo (Registrada ICA):</p>
                                    <p class="font-bold text-gray-900" th:text="${ventaDetalle.placaVehiculo ?: 'Por confirmar'}">ABC-123</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">Empresa de Transporte:</p>
                                    <p class="font-bold text-gray-900" th:text="${ventaDetalle.empresaTransporte ?: 'Por confirmar'}">Transportes Los Llanos</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">Nombre del Conductor:</p>
                                    <p class="font-bold text-gray-900" th:text="${ventaDetalle.nombreChofer ?: 'Por confirmar'}">Juan Pérez</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">Teléfono del Conductor:</p>
                                    <p class="font-bold text-gray-900" th:text="${ventaDetalle.telefonoChofer ?: 'Por confirmar'}">+57 300 123 4567</p>
                                </div>
                            </div>
                        </div>

                        <!-- Cronograma del Transporte -->
                        <div class="pb-4 border-b border-gray-200">
                            <p class="font-bold text-gray-900 mb-3 flex items-center gap-2">
                                <i class='bx bx-time text-emerald-600'></i>
                                Cronograma de Transporte
                            </p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                                <div>
                                    <p class="text-gray-600">Fecha de Recogida:</p>
                                    <p class="font-bold text-gray-900" th:text="${#temporals.format(ventaDetalle.fechaRecogida, 'dd/MMM/yyyy')}">28/Ene/2025</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">Hora de Recogida:</p>
                                    <p class="font-bold text-gray-900" th:text="${ventaDetalle.horaRecogida ?: 'Por confirmar'}">10:00 AM</p>
                                </div>
                                <div class="md:col-span-2">
                                    <p class="text-gray-600">Tiempo Estimado de Viaje:</p>
                                    <p class="font-bold text-emerald-600" th:text="${ventaDetalle.tiempoViaje ?: 'Calculado automáticamente'}">4 horas aproximadamente</p>
                                </div>
                            </div>
                        </div>

                        <!-- Especificaciones del Ganado para Transporte -->
                        <div class="pb-4 border-b border-gray-200">
                            <p class="font-bold text-gray-900 mb-3 flex items-center gap-2">
                                <i class='bx bx-list-ul text-emerald-600'></i>
                                Especificaciones del Ganado
                            </p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                                <div>
                                    <p class="text-gray-600">Cantidad de Animales:</p>
                                    <p class="font-bold text-gray-900" th:text="${ventaDetalle.cantidadAnimales}">9 bovinos</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">Categoría Predominante:</p>
                                    <p class="font-bold text-gray-900" th:text="${ventaDetalle.categoriaGanado ?: 'Adultos'}">Adultos</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">Peso Promedio:</p>
                                    <p class="font-bold text-gray-900" th:text="${ventaDetalle.pesoPromedio ?: 'No especificado'}">500 kg</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">Densidad de Carga Confirmada:</p>
                                    <p class="font-bold text-emerald-600">1.75 m² por animal (Cumple normativa)</p>
                                </div>
                            </div>
                        </div>

                        <!-- Regulaciones Cumplidas -->
                        <div>
                            <p class="font-bold text-gray-900 mb-3 flex items-center gap-2">
                                <i class='bx bx-shield-check text-emerald-600'></i>
                                Cumplimiento de Regulaciones (Resolución 6915/2022)
                            </p>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-start gap-3 p-2 bg-green-50 rounded border border-green-200">
                                    <i class='bx bx-check-circle text-green-600 flex-shrink-0 mt-0.5'></i>
                                    <span class="text-gray-900"><strong>Horario de Transporte:</strong> 6:00 AM - 6:00 PM (Confirmado)</span>
                                </div>
                                <div class="flex items-start gap-3 p-2 bg-green-50 rounded border border-green-200">
                                    <i class='bx bx-check-circle text-green-600 flex-shrink-0 mt-0.5'></i>
                                    <span class="text-gray-900"><strong>Duración Máxima:</strong> 10 horas para adultos / 6 horas para terneros (Dentro del límite)</span>
                                </div>
                                <div class="flex items-start gap-3 p-2 bg-green-50 rounded border border-green-200">
                                    <i class='bx bx-check-circle text-green-600 flex-shrink-0 mt-0.5'></i>
                                    <span class="text-gray-900"><strong>Vehículo ICA Registrado:</strong> Placa <span th:text="${ventaDetalle.placaVehiculo}">ABC-123</span></span>
                                </div>
                                <div class="flex items-start gap-3 p-2 bg-green-50 rounded border border-green-200">
                                    <i class='bx bx-check-circle text-green-600 flex-shrink-0 mt-0.5'></i>
                                    <span class="text-gray-900"><strong>Piso Antideslizante:</strong> Verificado</span>
                                </div>
                                <div class="flex items-start gap-3 p-2 bg-green-50 rounded border border-green-200">
                                    <i class='bx bx-check-circle text-green-600 flex-shrink-0 mt-0.5'></i>
                                    <span class="text-gray-900"><strong>Ventilación:</strong> Confirmada</span>
                                </div>
                                <div class="flex items-start gap-3 p-2 bg-green-50 rounded border border-green-200">
                                    <i class='bx bx-check-circle text-green-600 flex-shrink-0 mt-0.5'></i>
                                    <span class="text-gray-900"><strong>Descansos en Ruta:</strong> Incluidos con agua y alimento</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documentación del Transporte -->
            <div class="mb-6">
                <p class="font-bold text-gray-900 text-lg mb-4">Documentación del Transporte</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- GSMI de Transporte -->
                    <div class="bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-400 transition">
                        <div class="flex items-start justify-between">
                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i class='bx bx-file text-xl text-emerald-600'></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-900">GSMI de Transporte</p>
                                    <p class="text-xs text-gray-600 mt-1">Guía expedida por ICA</p>
                                </div>
                            </div>
                            <span th:if="${ventaDetalle.numeroGSMI}" class="text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full">
                                Expedida
                            </span>
                            <span th:unless="${ventaDetalle.numeroGSMI}" class="text-xs font-bold text-orange-600 bg-orange-100 px-2 py-1 rounded-full">
                                Pendiente
                            </span>
                        </div>
                        <p class="text-sm text-gray-900 mt-3 font-semibold" th:text="${'No. ' + ventaDetalle.numeroGSMI}">No. 00123456789</p>
                    </div>

                    <!-- Certificado de Limpieza -->
                    <div class="bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-400 transition">
                        <div class="flex items-start justify-between">
                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i class='bx bx-check-circle text-xl text-emerald-600'></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-900">Desinfección del Vehículo</p>
                                    <p class="text-xs text-gray-600 mt-1">Pre-transporte registrado</p>
                                </div>
                            </div>
                            <span th:if="${ventaDetalle.desinfeccionVehiculo}" class="text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full">
                                Verificado
                            </span>
                            <span th:unless="${ventaDetalle.desinfeccionVehiculo}" class="text-xs font-bold text-orange-600 bg-orange-100 px-2 py-1 rounded-full">
                                Pendiente
                            </span>
                        </div>
                        <p class="text-sm text-gray-600 mt-3" th:if="${ventaDetalle.fechaDesinfeccion}">
                            <i class='bx bx-calendar text-xs'></i> <span th:text="${#temporals.format(ventaDetalle.fechaDesinfeccion, 'dd/MMM HH:mm')}">28/Ene 08:00</span>
                        </p>
                    </div>

                    <!-- Inspección del ICA -->
                    <div class="bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-400 transition">
                        <div class="flex items-start justify-between">
                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i class='bx bx-user-check text-xl text-emerald-600'></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-900">Inspección ICA</p>
                                    <p class="text-xs text-gray-600 mt-1">Verificación pre-viaje</p>
                                </div>
                            </div>
                            <span th:if="${ventaDetalle.inspeccionICA}" class="text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full">
                                Completada
                            </span>
                            <span th:unless="${ventaDetalle.inspeccionICA}" class="text-xs font-bold text-orange-600 bg-orange-100 px-2 py-1 rounded-full">
                                Pendiente
                            </span>
                        </div>
                        <p class="text-sm text-gray-600 mt-3" th:if="${ventaDetalle.inspectorICA}">Inspector: <span th:text="${ventaDetalle.inspectorICA}">Juan García</span></p>
                    </div>

                    <!-- Seguro de Transporte -->
                    <div class="bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-400 transition">
                        <div class="flex items-start justify-between">
                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i class='bx bx-shield-alt text-xl text-emerald-600'></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-900">Póliza de Seguro</p>
                                    <p class="text-xs text-gray-600 mt-1">Cobertura de transporte</p>
                                </div>
                            </div>
                            <span th:if="${ventaDetalle.numeroPoliza}" class="text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full">
                                Activa
                            </span>
                            <span th:unless="${ventaDetalle.numeroPoliza}" class="text-xs font-bold text-orange-600 bg-orange-100 px-2 py-1 rounded-full">
                                Pendiente
                            </span>
                        </div>
                        <p class="text-sm text-gray-900 mt-3 font-semibold" th:text="${'Póliza: ' + ventaDetalle.numeroPoliza}">Póliza: POL-2025-123456</p>
                    </div>
                </div>
            </div>

            <!-- Observaciones especiales -->
            <div th:if="${ventaDetalle.observacionesTransporte}" class="bg-blue-50 border-l-4 border-blue-600 p-6 rounded-lg">
                <p class="font-bold text-blue-900 mb-2 flex items-center gap-2">
                    <i class='bx bx-note'></i>
                    Observaciones Especiales del Transporte
                </p>
                <p class="text-sm text-blue-800 mt-2" th:text="${ventaDetalle.observacionesTransporte}">Aquí aparecerán las observaciones específicas</p>
            </div>

            <!-- Resumen de Cumplimiento -->
            <div class="bg-green-50 border-l-4 border-green-600 p-6 rounded-lg mt-6">
                <p class="font-bold text-green-900 mb-3 flex items-center gap-2">
                    <i class='bx bx-check-double text-2xl'></i>
                    Resumen de Cumplimiento
                </p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
                    <div class="bg-white rounded-lg p-3 text-center border border-green-200">
                        <p class="text-2xl font-bold text-green-600">✓</p>
                        <p class="text-xs text-gray-600 mt-1">Regulaciones</p>
                    </div>
                    <div class="bg-white rounded-lg p-3 text-center border border-green-200">
                        <p class="text-2xl font-bold text-green-600">✓</p>
                        <p class="text-xs text-gray-600 mt-1">Documentos</p>
                    </div>
                    <div class="bg-white rounded-lg p-3 text-center border border-green-200">
                        <p class="text-2xl font-bold text-green-600">✓</p>
                        <p class="text-xs text-gray-600 mt-1">Bienestar Animal</p>
                    </div>
                    <div class="bg-white rounded-lg p-3 text-center border border-green-200">
                        <p class="text-2xl font-bold text-green-600">✓</p>
                        <p class="text-xs text-gray-600 mt-1">Trazabilidad</p>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>